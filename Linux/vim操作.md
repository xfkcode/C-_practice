# vim操作:racing_car: 

## 1. vim

#### 1.1 vim简单介绍

**vi** 是 visual interface 的简称，它在Linux上的地位就仿佛Windows中的记事本。它可以执行编辑、删除、查找、替换、块操作等众多文本操作，而且用户可以根据自己的需求对其进行定制。vi是一个文本编辑程序，没有菜单，只有命令。

**vim** 更高级，可以理解为vi的高级版本。  
`vimtutor` 可查看相关的帮助文档。

#### 1.2 vim三种模式

vim 有输入和命令 **3** 种工作模式：
1>命令模式>>>  
				`：` 转末行，`iI/oO/aA` 转编辑，`ZZ（大写）` 保存退出  
2>文本（编辑）模式>>>  
				`Esc` 转命令  
3>末行模式>>>  
				`w` 保存 `q` 退出，`Esc Esc ` / `执行一次末行命令`转命令

#### 1.3 vim基本操作

##### 1.3.1 命令模式下的操作

`vim 文件` 进入命令模式  
文本模式 `Esc` 转命令模式

###### 1）保存退出

`ZZ`（大写）

###### 2）代码格式化

`gg=G` 缩进排版

###### 3）光标移动

| 快捷键     | 操作         |
| ---------- | ------------ |
| `hjkl`     | 左下上右     |
| `w`        | 移动一个单词 |
| `gg`       | 移动首行     |
| `G`        | 移动尾行     |
| `0` （零） | 移动行首     |
| `$`        | 移动行尾     |
| [n]G       | 跳转到第n行  |

###### 4）删除命令

| 快捷键                           | 操作                                |
| -------------------------------- | ----------------------------------- |
| `x`                              | 删除光标后一个字符，相当于Del       |
| `X`                              | 删除光标前一个字符，相当于Backspace |
| `dw`                             | 删除光标后一个单词                  |
| `d0`                             | 删除光标前全部内容                  |
| `D/d$`                           | 删除光标后全部内容                  |
| `[n]dd`                          | 剪切从光标所在行n行                 |
| `v（非列模式）/Ctrl+v（列模式）` | 使用hjkl移动选择内容，然后d删除，   |

###### 5）撤销和反撤销

| 快捷键   | 操作   |
| -------- | ------ |
| `u`      | 撤销   |
| `Ctrl+r` | 反撤销 |

###### 6）复制和粘贴

| 快捷键  | 操作                               |
| ------- | ---------------------------------- |
| `[n]yy` | 复制当前行，n行                    |
| `[n]dd` | 剪切当前行，n行                    |
| `p/P`   | 小p向下，大P向上，粘贴开辟新的一行 |

###### 7）可视模式

`v/Ctrl+v`    
使用 `hjkl` 移动选择内容  

- `d` 删除
- `y` 复制
- `p/P` 小p光标前，大P光标后，粘贴

###### 8）查找命令

输入`/nohl`，可以取消高亮

| 快捷键    | 操作                                   |
| --------- | -------------------------------------- |
| `/xxx`    | 光标所在位置开始搜索（n向下，N向上）   |
| `?xxx`    | 光标所在位置开始搜索（n向上，N向下）   |
| `#`       | 光标移动到待查找字符串（n向上，N向下） |
| `Shift+k` | 光标移动到待查找字符串，查看帮助文档   |

###### 9）替换命令

| 快捷键 | 操作                            |
| ------ | ------------------------------- |
| `r`    | 替换当前字符                    |
| `R`    | 替换当前行光标后的字符，Esc退出 |

##### 1.3.2 切换文本输入模式

| 快捷键   | 功能                                                         |
| -------- | ------------------------------------------------------------ |
| `i`      | 在光标前插入                                                 |
| `I`      | 在光标所在行行首插入                                         |
| `o`      | 在光标所在行的下插入新的一行，行首插入                       |
| `O`      | 在光标所在行的上插入新的一行，行首插入                       |
| `a`      | 在光标后插入                                                 |
| `A`      | 在光标所在行行尾插入                                         |
| `s`      | 删除光标后字符，从光标当前位置插入                           |
| `S`      | 删除光标所在当前行，从行首插入                               |
| `Ctrl+v` | 列模式下，`hjkl` 移动选定某多列，`I` 向前插入，最后 `Esc Esc` <br />应用：多行注释 |

##### 1.3.3 末行模式下的操作

命令模式 `:` 转末行模式   
末行模式 `Esc Esc` /  `backspace` / `Enter` 转命令模式

###### 1）保存退出

| 快捷键 | 操作     |
| ------ | -------- |
| `q`    | 退出     |
| `q！`  | 强制退出 |
| `w`    | 保存     |
| `wq/x` | 保存退出 |

###### 2）替换操作

| 快捷键                                                       | 操作                           |
| ------------------------------------------------------------ | ------------------------------ |
| `:s/old/new/`                                                | 光标所在行的第一个old替换为new |
| `:s/old/new/g`                                               | 光标所在行所有old替换为new     |
| `:m,ns/old/new/g`                                            | 将m-n行之间的old替换为new      |
| `:%s/old/new/g`<br />`:1,$s/old/new/g`<br />`:%s/old/new/gc`（提示用户） | 当前文件的所有old替换为new     |

###### 3）快速翻屏

| 快捷键   | 操作                     |
| -------- | ------------------------ |
| `Ctrl+u` | 向下翻半屏，光标向上移动 |
| `Ctrl+d` | 向上翻半屏，光标向下移动 |
| `Ctrl+f` | 向下翻一屏               |
| `Ctrl+b` | 向上翻一屏               |

###### 4）执行shell命令

`:! shell命令`  vim中执行shell命令后返回vim  
`Esc Esc` 返回命令模式

###### 5）分屏操作

| 快捷键                       | 操作                                 |
| ---------------------------- | ------------------------------------ |
| `sp [文件名]`                | 水平分屏                             |
| `vsp [文件名]`               | 垂直分屏                             |
| `Ctrl+w+w`                   | 切换窗口                             |
| `wall/wqall/xall/qall/qall!` | 保存/保存退出/保存退出/退出/强制退出 |

【:loudspeaker:】`vim -o/O 文件1 文件2` 小o水平分屏，大O垂直分屏

##### 1.3.4 vim配置文件

`~/.vimrc` 用户级别

`/etc/vim/vimrc` 系统级别

- `set tabstop=4` 设置缩进4个空格
- `set nu` 设置行号
- `set shiftwidth` 设置`gg=G`缩进4个空格 

## 2. gcc编译器

#### 2.1 gcc工作流程

hello.c【源文件】 :one:>>> hello.i【c文件】 :two:>>> hello.s【汇编文件】 :three:>>> hello.o【二进制文件】 :four:>>> a.out【可执行文件】

:one: 预处理（cpp）`gcc -E xxx.c -o xxx.i`   
**头文件展开，宏替换，去掉注释**

:two: 编译器（gcc）`gcc -S xxx.i -o xxx.s`  
**c文件变成汇编文件**

:three: 汇编器（as） `gcc -c xxx.s -o xxx.o`  
**汇编文件变成二进制文件**

:four: 链接器（ld）`gcc xxx.o -o xxx`  
**将函数库中相应的代码组合到目标文件中**

【:loudspeaker:】四合一 `gcc -o xxx xxx.c` 

```Linux
>>> 预处理
[xfk@centos TESTDIR]$ gcc -E file.c -o file.i
[xfk@centos TESTDIR]$ ls -l file.i
-rw-rw-r--. 1 xfk xfk 16888 1月  11 21:29 file.i
>>> 编译
[xfk@centos TESTDIR]$ gcc -S file.i -o file.s
[xfk@centos TESTDIR]$ ls -l file.s
-rw-rw-r--. 1 xfk xfk 735 1月  11 21:35 file.s
>>> 汇编
[xfk@centos TESTDIR]$ gcc -c file.s -o file.o
[xfk@centos TESTDIR]$ ls -l file.o
-rw-rw-r--. 1 xfk xfk 1632 1月  11 21:38 file.o
>>> 链接
[xfk@centos TESTDIR]$ gcc file.o -o file
[xfk@centos TESTDIR]$ ./file 
hello world
>>> 四合一
[xfk@centos TESTDIR]$ gcc -o file file.c
[xfk@centos TESTDIR]$ ./file
hello world
```

#### 2.2 gcc常用参数



---
> ✍️ [邢福凯 (xfkcode@github)](https://github.com/xfkcode)  
> 📅 **写于2023年1月** 